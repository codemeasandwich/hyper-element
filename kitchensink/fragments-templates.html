<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Fragment Templates - hyper-element Kitchen Sink</title>
  <script src="https://cdn.jsdelivr.net/npm/hyperhtml@latest/min.js"></script>
  <script src="test-loader.js"></script>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    section { margin: 2rem 0; padding: 1rem; border: 1px solid #ddd; border-radius: 4px; }
    section[data-test-result="pass"] { border-color: green; background: #f0fff0; }
    section[data-test-result="fail"] { border-color: red; background: #fff0f0; }
    h1 { border-bottom: 2px solid #333; }
    h2 { margin-top: 0; }
    pre { background: #f5f5f5; padding: 1rem; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>Fragment Templates</h1>
  <p>Demonstrates fragments with template strings and value objects.</p>

  <section data-test="fragment-template-basic" data-test-result="pending">
    <h2>Basic Fragment Template</h2>
    <p>Fragment methods can return a template string with {placeholders}.</p>
    <pre><code>class extends hyperElement {
  Button(values) {
    return {
      template: '&lt;button&gt;{text}&lt;/button&gt;'
    }
  }
  render(Html) {
    Html`${{ Button: { text: "Click me" } }}`
  }
}</code></pre>
    <fragments-element2></fragments-element2>
    <script>
      customElements.define("fragments-element2", class extends hyperElement {
        Button(values) {
          return {
            template: '<span>{text}</span>'
          }
        }
        render(Html) {
          Html`fragments-element2: ${{ Button: { text: "PASS" } }}`
        }
      });

      requestAnimationFrame(() => {
        const section = document.querySelector('[data-test="fragment-template-basic"]');
        const elem = document.querySelector('fragments-element2');
        if (elem && elem.textContent.includes('PASS')) {
          section.dataset.testResult = 'pass';
        } else {
          section.dataset.testResult = 'fail';
        }
      });
    </script>
  </section>

  <section data-test="fragment-template-values" data-test-result="pending">
    <h2>Fragment with Custom Values</h2>
    <p>Fragment methods can compute values from input data.</p>
    <pre><code>class extends hyperElement {
  Status({ data }) {
    return {
      template: '&lt;span&gt;{status}&lt;/span&gt;',
      values: { status: data === "ok" ? "PASS" : "FAIL" }
    }
  }
  render(Html) {
    Html`${{ Status: { data: "ok" } }}`
  }
}</code></pre>
    <fragments-element3></fragments-element3>
    <script>
      customElements.define("fragments-element3", class extends hyperElement {
        Status({ data }) {
          return {
            template: '<span>{status}</span>',
            values: { status: data === "ok" ? "PASS" : "FAIL" }
          }
        }
        render(Html) {
          Html`fragments-element3: ${{ Status: { data: "ok" } }}`
        }
      });

      requestAnimationFrame(() => {
        const section = document.querySelector('[data-test="fragment-template-values"]');
        const elem = document.querySelector('fragments-element3');
        if (elem && elem.textContent.includes('PASS')) {
          section.dataset.testResult = 'pass';
        } else {
          section.dataset.testResult = 'fail';
        }
      });
    </script>
  </section>

  <section data-test="fragment-template-events" data-test-result="pending">
    <h2>Fragment with Events and Attributes</h2>
    <p>Fragment values can include functions for event handlers.</p>
    <pre><code>class extends hyperElement {
  Input({ data }) {
    return {
      template: '&lt;input placeholder={ph} oninput={handler}/&gt;{text}',
      values: {
        ph: "Type here",
        handler: (e) => console.log(e.target.value),
        text: data === "ok" ? "PASS" : "FAIL"
      }
    }
  }
}</code></pre>
    <fragments-element4></fragments-element4>
    <script>
      customElements.define("fragments-element4", class extends hyperElement {
        Input({ data }) {
          return {
            template: '<input placeholder={placeholder} type="text" style="display:none" oninput={oninput}/>{text}',
            values: {
              placeholder: "placeholder",
              oninput: () => {},
              text: data === "ok" ? "PASS" : "FAIL"
            }
          }
        }
        render(Html) {
          Html`fragments-element4: ${{ Input: { data: "ok" } }}`
        }
      });

      requestAnimationFrame(() => {
        const section = document.querySelector('[data-test="fragment-template-events"]');
        const elem = document.querySelector('fragments-element4');
        if (elem && elem.textContent.includes('PASS')) {
          section.dataset.testResult = 'pass';
        } else {
          section.dataset.testResult = 'fail';
        }
      });
    </script>
  </section>

  <a href="index.html">&larr; Back to Kitchen Sink</a>
</body>
</html>
