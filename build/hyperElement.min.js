(function(h){window.hyperElement=h(window.hyperHTML)})(function(h){const b=/<+\w+[-]+\w/,d={},m={};function O(){for(var a="",t="bcdfghjklmnpqrstvwxyz",s=0;s<15;s++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}function C(a,t){if(a==="template"&&t==="")return!0;if(+t+""===t.trim())return+t;const s=t.toLowerCase().trim();return s==="true"?!0:s==="false"?!1:s[0]==="["&&s.slice(-1)==="]"||s[0]==="{"&&s.slice(-1)==="}"?JSON.parse(t):t}function j(a,t){let s=a;const r=/\{#each\s+(\w+)\}([\s\S]*?)\{\/each\}/g;s=s.replace(r,(l,u,o)=>{const c=t[u];return Array.isArray(c)?c.map((f,T)=>{let p=o;return p=p.replace(/\{\.\}/g,f),p=p.replace(/\{@index\}/g,T),typeof f=="object"&&f!==null&&Object.keys(f).forEach(y=>{p=p.replace(new RegExp("\\{"+y+"\\}","g"),f[y])}),p}).join(""):""});const i=/\{#if\s+(\w+)\}([\s\S]*?)\{else\}([\s\S]*?)\{\/if\}/g;s=s.replace(i,(l,u,o,c)=>t[u]?o:c);const e=/\{#if\s+(\w+)\}([\s\S]*?)\{\/if\}/g;s=s.replace(e,(l,u,o)=>t[u]?o:"");const n=/\{#unless\s+(\w+)\}([\s\S]*?)\{\/unless\}/g;return s=s.replace(n,(l,u,o)=>t[u]?"":o),s}function g(a){if(/\{#(if|each|unless)\s/.test(a))return function(n){if(typeof n!="object")throw new Error("Templates must be passed an object. You passed "+JSON.stringify(n));let l=j(a,n);return l=l.replace(/\{(\w+)\}/g,(u,o)=>n[o]!=null?n[o]:""),l};const s=/(\{[\w]+\})/g,r=a.split(s).reduce((e,n)=>(n[0]==="{"&&n.slice(-1)==="}"?e.keys.push(n.slice(1,-1)):e.markup.push(n),e),{markup:[],keys:[]});r.id=":"+r.markup.join().trim();function i(e){const n=[r.markup,...r.keys.map(l=>e[l])];return n.raw={value:r.markup},n}return function(n){if(typeof n!="object")throw new Error("Templates must be passed an object to be populated with. You passed "+JSON.stringify(n)+" to "+r.id);return h.wire(n,r.id)(...i(n))}}function w(a,t){const s=t.replace(/-([a-z])/g,r=>r[1].toUpperCase());Object.defineProperty(a,s,{enumerable:!0,configurable:!0,get:()=>C(s,this.dataset[s]),set:r=>{d[this.identifier].attrsToIgnore["data-"+t]=!0,typeof r=="string"?this.dataset[s]=r:this.dataset[s]=JSON.stringify(r)}})}function x(){const a={};return Object.keys(this.dataset).forEach(t=>w.call(this,a,t.replace(/([A-Z])/g,s=>`-${s[0].toLowerCase()}`))),a}function A(a){const t={};for(let s=0;s<a.length;s++){const{value:r,name:i}=a[s];if(i==="template"&&!r){const e=d[this.identifier];e.Html.template=g(e.innerHTML),t[i]=!0}else(r.substr(0,3)==="fn-"||r.substr(0,3)==="ob-")&&m[r.substr(3)]&&m[r.substr(3)].localName===this.localName?t[i]=m[r.substr(3)].val:+r+""===(r+"").trim()?t[i]=+r:t[i]=r}return t}function N(a){const t=h.bind(a);function s(...r){if(r.slice(1).some(i=>typeof i=="function"||i!==null&&typeof i=="object")&&r[0].some(i=>b.test(i))){let i=!1,e="";r[0].forEach((n,l,u)=>{if(b.test(n)?(i=n.substring(n.match(b).index).indexOf(">")===-1,e=i&&n.substring(n.indexOf(n.match(b))).split(" ")[0].substr(1)):0<=n.indexOf(">")&&(i=!1,e=""),!i)return;const o=r[l+1];if(typeof o=="function"||o!==null&&typeof o=="object"){const c=n.split(" ").pop().slice(0,-1);if(c.substring(0,2)==="on")throw new Error(`'on' is reserve for native elements. Change: "${c}" for "${e}" to something else`);if(c==="style")return;const f=O();m[f]={attrName:c,val:o,localName:e},r[l+1]=(typeof o=="function"?"fn-":"ob-")+f}})}return t(...r)}return s.wire=function(...i){return h.wire(...i)},s.lite=function(...i){return h(...i)},s}function v(a,t){const s=typeof t=="function"?t:()=>t,r=this.render,i=(...e)=>{t===void 0?(a.store=void 0,r(...e)):(a.store=s(),r(a.store,...e))};return this.render=i,i}function S(a){const t=a.this;new MutationObserver(r=>{if(!a.observe)return;if(r.filter(n=>n.type==="attributes").length>0){t.attrs=this.attachAttrs(this.attributes)||{},this.render();return}let e=this.textContent;a.innerHTML=this.innerHTML,t.attrs.template&&(t.attrs=this.attachAttrs(this.attributes)||{}),h.bind(a.shadow)``,t.wrappedContent=e,this.render()}).observe(this,{attributes:!0,childList:!0,subtree:!0})}function k(){this.identifier=Symbol(this.localName);const a=d[this.identifier]={attrsToIgnore:{}};a.innerHTML=this.innerHTML;const t=a.this={element:this};t.wrappedContent=this.textContent,S.call(this,a),Object.getOwnPropertyNames(this.__proto__).filter(i=>!(i==="constructor"||i==="setup"||i==="render")).forEach(i=>{if(/^[A-Z]/.test(i)){let e;const n={},l=u=>{if(e!==void 0&&e.once)return e;if(e=this[i](u),e.template)if(typeof e.template=="string")n[e.template]||(n[e.template]=g(e.template)),e={any:n[e.template](e.values||u)};else if(typeof e.template=="object"&&typeof e.template.then=="function")e=Object.assign({},e,{any:e.template.then(o=>{let{template:c,values:f}=o;return!c&&typeof o=="string"&&(c=o,f={}),n[c]||(n[c]=g(c)),Array.isArray(f)?e={any:f.map(n[c]),once:e.once}:e={any:n[c](f||u),once:e.once},e.any})});else throw new Error("unknow template type:"+typeof e.template+" | "+JSON.stringify(e.template));return e};h.define(i,l)}else t[i]=this[i].bind(t);delete this[i]});function s(){return"hyper-element: "+this.localName}Object.defineProperty(t,"toString",{value:s.bind(this),writable:!1}),a.shadow=this,a.Html=N(a.shadow),t.attrs=this.attachAttrs(this.attributes),t.dataset=this.getDataset();const r=this.render;this.render=(...i)=>{a.observe=!1,setTimeout(()=>{a.observe=!0},0),r.call(t,a.Html,...i),Object.getOwnPropertyNames(t.dataset).filter(e=>!this.dataset[e]).forEach(e=>{const n=t.dataset[e];w.call(this,t.dataset,e.replace(/([A-Z])/g,l=>`-${l[0].toLowerCase()}`)),t.dataset[e]=n})},this.setup&&(a.teardown=this.setup.call(t,v.bind(this,t))),this.render()}class E extends HTMLElement{identifier;get innerShadow(){return d[this.identifier].shadow.innerHTML}connectedCallback(){k.call(this)}addDataset(t,s){w.call(this,t,s)}getDataset(){return x.call(this)}attachAttrs(t){return A.call(this,t)}attributeChangedCallback(t,s,r){const i=d[this.identifier];if(!i)return;r!==null&&+r+""===r.trim()&&(r=+r);const{attrsToIgnore:e}=i,n=i.this;if(0<=t.indexOf("data-")){const l=t.slice(5);if(s===null)this.addDataset(n.dataset,l);else if(r===null){const u=l.replace(/-([a-z])/g,o=>o[1].toUpperCase());delete n.dataset[u]}}if(r!==n.attrs[t])if(r===null?delete n.attrs[t]:n.attrs[t]=r,e[t]){delete e[t];return}else this.render()}disconnectedCallback(){const t=d[this.identifier];t.teardown&&t.teardown()}setup(t){}render(t,...s){}}return E});
//# sourceMappingURL=hyperElement.min.js.map
